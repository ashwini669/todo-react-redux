{"ast":null,"code":"import { ADD_TODO, DELETE_TODO, UPDATE_TODO } from './actions';\nimport { todos } from './states';\nexport let keyVal;\nlet x = 0;\nlet flag;\nexport let reducer = (state = todos, action) => {\n  let newTodos;\n\n  switch (action.type) {\n    case ADD_TODO:\n      // newTodos=[...state];\n      // newTodos.push(action.payload)\n      let tasks = localStorage.getItem(\"todo_table\");\n\n      if (tasks == null) {\n        var todo = [];\n      } else {\n        todo = JSON.parse(tasks);\n      }\n\n      todo.map(item => {\n        if (item.Key !== action.payload.id) {\n          x++;\n\n          if (x === todo.length) {\n            todo.push({\n              'Task': action.payload.name,\n              'Key': action.payload.id\n            });\n            localStorage.setItem(\"todo_table\", JSON.stringify(todo));\n          }\n        }\n\n        if (item.Key === action.payload.id) {\n          flag = \"true\";\n          item.Task = action.payload.name;\n          todo.push({\n            'Task': action.payload.name,\n            'Key': action.payload.id\n          });\n          localStorage.setItem(\"todo_table\", JSON.stringify(todo));\n        }\n\n        if (flag === \"true\") {\n          return flag;\n        }\n      });\n      return todo;\n      break;\n\n    case DELETE_TODO:\n      // newTodos=[...state];\n      // newTodos=newTodos.filter(todo=> todo.id !== action.payload);\n      var todo = [];\n\n      if (localStorage.getItem('todo_table') === null) {\n        todo = [];\n      } else {\n        todo = JSON.parse(localStorage.getItem('todo_table'));\n      }\n\n      todo = todo.filter(function (todo, index) {\n        return todo.Key !== action.payload;\n      });\n      localStorage.setItem('todo_table', JSON.stringify(todo));\n      return todo;\n      break;\n\n    case UPDATE_TODO:\n      var data = [];\n\n      if (localStorage.getItem('todo_table') === null) {\n        data = [];\n      } else {\n        data = JSON.parse(localStorage.getItem('todo_table'));\n      }\n\n      data.map(item => {\n        if (item.Key === action.payload.Key) {\n          document.getElementById('demo').value = action.payload.Task;\n          keyVal = item.Key;\n        }\n      });\n      return data;\n      break;\n\n    default:\n      return state;\n  }\n}; // export default keyVal;","map":{"version":3,"sources":["/home/ashwini/Music/todo-redux/src/redux/reducer.js"],"names":["ADD_TODO","DELETE_TODO","UPDATE_TODO","todos","keyVal","x","flag","reducer","state","action","newTodos","type","tasks","localStorage","getItem","todo","JSON","parse","map","item","Key","payload","id","length","push","name","setItem","stringify","Task","filter","index","data","document","getElementById","value"],"mappings":"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","sourcesContent":["import { ADD_TODO, DELETE_TODO, UPDATE_TODO} from './actions';\nimport {todos} from './states'\n\nexport let keyVal;\nlet x=0;\nlet flag;\nexport let reducer=(state=todos,action) => {\n    let newTodos;\n    \n    switch(action.type)\n    {  \n        case ADD_TODO:  // newTodos=[...state];\n                        // newTodos.push(action.payload)\n\n                        let tasks=localStorage.getItem(\"todo_table\");\n                        if(tasks==null)\n                        {\n                          var todo=[];\n                         }\n                        else{\n                             todo=JSON.parse(tasks);\n                            }\n                          \n                            todo.map(item =>{\n                                if(item.Key!==action.payload.id)\n                                {   \n                                    x++;\n                                    if(x===todo.length)\n                                    {\n                                    todo.push({'Task':action.payload.name,'Key':action.payload.id});\n                                    localStorage.setItem(\"todo_table\",JSON.stringify(todo));\n                                    }\n                                }\n                                if(item.Key===action.payload.id)\n                                {  \n                                    flag=\"true\";\n                                    item.Task=action.payload.name;\n                                    todo.push({'Task':action.payload.name,'Key':action.payload.id});\n                                    localStorage.setItem(\"todo_table\",JSON.stringify(todo));\n                                    \n                                }\n                               \n                                if(flag===\"true\"){\n                                    return flag;\n                                }\n                            });\n                        return todo;\n                        break;\n\n        case DELETE_TODO:\n                        // newTodos=[...state];\n                        // newTodos=newTodos.filter(todo=> todo.id !== action.payload);\n\n                        var todo=[];\n                        if(localStorage.getItem('todo_table')===null){\n                            todo=[];\n                        } else{\n                            todo= JSON.parse(localStorage.getItem('todo_table'));\n                        }\n                        todo= todo.filter(function(todo,index) {\n                            return todo.Key!==action.payload\n                          });\n                        localStorage.setItem('todo_table',JSON.stringify(todo));\n\n                        return todo;\n                        break; \n\n        case UPDATE_TODO:\n                        var data=[];\n                        if(localStorage.getItem('todo_table')===null){\n                            data=[];\n                        } else{\n                            data= JSON.parse(localStorage.getItem('todo_table'));\n                        }\n                        data.map(item =>{\n                            if(item.Key === action.payload.Key)\n                            {\n                              document.getElementById('demo').value=action.payload.Task;\n                              keyVal=item.Key;\n                            }\n                          })\n\n\n                        return data;\n                        break;  \n                \n        default:\n                 return state;\n    }\n}\n\n// export default keyVal;"]},"metadata":{},"sourceType":"module"}